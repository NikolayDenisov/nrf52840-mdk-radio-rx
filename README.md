# nrf52840-mdk-radio-rx ‚Äî –ü—Ä–∏–º–µ—Ä –ø—Ä–∏—ë–º–Ω–∏–∫–∞ –Ω–∞ nRF52840

–ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ —Ä–∞–¥–∏–æ –º–æ–¥—É–ª—è **nRF52840** –≤ —Ä–µ–∂–∏–º–µ **–ø—Ä–∏—ë–º–∞ –ø–∞–∫–µ—Ç–æ–≤** (RX).  
–ö–æ–¥ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π, –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π (register-based) radio receiver –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è SoftDevice.

–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã —Ä–∞–¥–∏–æ-–ø–æ–¥—Å–∏—Å—Ç–µ–º—ã –∏ –æ—Ç–ª–∞–¥–∏—Ç—å –ø—Ä–∏—ë–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–∞–∫–µ—Ç–æ–≤.

---

## üì° –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–¥–∏–æ –º–æ–¥—É–ª—è —á–µ—Ä–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä—ã `NRF_RADIO`
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞–Ω–∞–ª–∞, –º–æ—â–Ω–æ—Å—Ç–∏, –∞–¥—Ä–µ—Å–∞ –∏ —Ñ–æ—Ä–º–∞—Ç–∞ –ø–∞–∫–µ—Ç–∞
- –û–∂–∏–¥–∞–Ω–∏–µ –ø—Ä–∏—ë–º–∞ –ø–∞–∫–µ—Ç–∞
- –ß—Ç–µ–Ω–∏–µ 32-–±–∏—Ç–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –ø–∞–∫–µ—Ç–∞
- –í—ã–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ `NRF_LOG`
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: radio.c, radio_config.h, clock.c

---

## üß© –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–∞–¥–∏–æ

–§—Ä–∞–≥–º–µ–Ω—Ç –ª–æ–≥–∏–∫–∏ –ø—Ä–∏—ë–º–∞ (–∏–∑ `main.c`):

```c
uint32_t received = read_packet();
NRF_LOG_INFO("Packet was received");
NRF_LOG_INFO("The contents of the package is %u", (unsigned int)received);
````

### –†–∞–¥–∏–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`radio.c`)

* –ß–∞—Å—Ç–æ—Ç–∞: `FREQUENCY = 7` (2407 MHz)
* –ú–æ—â–Ω–æ—Å—Ç—å TX (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ RX): `0 dBm`
* Mode: `1 Mbps`
* –ê–¥—Ä–µ—Å–∞:

  * BASE0 = `0x00000000`
  * PREFIX0 = `0xAA`
* –î–ª–∏–Ω–∞ –ø–∞–∫–µ—Ç–∞ –∑–∞–¥–∞—ë—Ç—Å—è –≤ `PCNF0` / `PCNF1`
* –ü—Ä–∏—ë–º –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑:

  * `TASKS_RXEN`
  * `TASKS_START`
  * –æ–∂–∏–¥–∞–Ω–∏–µ `EVENTS_END`

---

## üìÇ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

–ü–µ—Ä–µ–¥ —Å–±–æ—Ä–∫–æ–π —É–∫–∞–∂–∏—Ç–µ –ø—É—Ç–∏ –∫ SDK –∏ –∫–∞—Ç–∞–ª–æ–≥—É –ø–ª–∞—Ç—ã –≤ `Makefile`:

```makefile
MDK_ROOT := /Users/nick/projects/iot/nrf52840-mdk/
SDK_ROOT := /Users/nick/projects/iot/nRF5_SDK_17.1.0_ddde560/
```

–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

* arm-none-eabi-gcc
* arm-none-eabi-binutils
* nrfutil
* –ü–ª–∞—Ç–∞ **nRF52840-MDK**, –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω–∞—è –ø–æ USB

---

## üîß –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
make
```

---

## üöÄ –ü—Ä–æ—à–∏–≤–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

```bash
make flash
```

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

* `main.c` ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–≥–∞, —Ç–∞–π–º–µ—Ä–æ–≤, —á–∞—Å–æ–≤ –∏ –≤—ã–∑–æ–≤ –ø—Ä–∏—ë–º–Ω–∏–∫–∞
* `radio.c` ‚Äî –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–¥–∏–æ –∏ —Ñ—É–Ω–∫—Ü–∏—è `read_packet()`
* `radio.h` ‚Äî –∑–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–∏—ë–º–Ω–∏–∫–∞
* `radio_config.h` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–∞–∫–µ—Ç–∞ (BALEN, –¥–ª–∏–Ω–∞, endian –∏ –¥—Ä.)
* `clock.c` ‚Äî –≤–∫–ª—é—á–µ–Ω–∏–µ –≤—ã—Å–æ–∫–æ—á–∞—Å—Ç–æ—Ç–Ω–æ–≥–æ –∫–≤–∞—Ä—Ü–∞ –¥–ª—è —Ä–∞–¥–∏–æ
* `Makefile` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞

---

## üìú –ü—Ä–∏–º–µ—Ä –ª–æ–≥–∞

–ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –ø—Ä–∏—ë–º–µ:

```
<info> app: Radio receiver example started.
<info> app: Wait for first packet
<info> app: Packet was received
<info> app: The contents of the package is 12345678
```

---

